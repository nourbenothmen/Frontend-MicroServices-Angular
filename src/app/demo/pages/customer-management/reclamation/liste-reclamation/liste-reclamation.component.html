<div class="card shadow-sm border-0 rounded-3">
  <div class="card-header d-flex justify-content-between align-items-center bg-primary text-white rounded-top">
    <h4 class="card-title mb-0">
      ğŸ“ Liste des RÃ©clamations
    </h4>
  </div>

  <div class="card-body p-3 bg-light">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-primary text-dark">
          <tr>
            <th>ID</th>
            <th>Client</th>
            <th>Article ğŸ“¦</th>
            <th>Description ğŸ“</th>
            <th>Status</th>
            <th>CrÃ©Ã© le ğŸ—“ï¸</th>
            <th>RÃ©solu le âœ…</th>
            <th>Actions âš™ï¸</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let rec of reclamations; trackBy: trackByReclamationId" class="align-middle">
            <td class="fw-bold text-secondary">#{{ rec.id }}</td>
            <td class="text-truncate" style="max-width: 180px;">{{ rec.customerNom }}</td>
            <td class="text-truncate" style="max-width: 180px;">{{ rec.articleNom }}</td>
            <td class="text-truncate" style="max-width: 250px;">{{ rec.description }}</td>
            <td>
   <span class="badge fw-bold px-2 py-1" [ngClass]="getStatusClass(rec.status)">
  {{ rec.status | reclamationStatus }}
</span>



            </td>
            <td>ğŸ—“ï¸ {{ rec.createdAt | date:'dd/MM/yyyy HH:mm' }}</td>
            <td>
              {{ rec.resolvedAt ? (rec.resolvedAt | date:'dd/MM/yyyy HH:mm') : 'â³ -'}}
            </td>
            <td>
              <button
                class="btn btn-sm btn-outline-primary fw-bold"
                [routerLink]="['/reclamations/details', rec.id]"
                title="Voir dÃ©tails">
                ğŸ” DÃ©tails
              </button>
                <!-- Bouton Planifier -->
<!-- ğŸ“… Planifier (ResponsableSAV + statut En attente) -->
<button
  class="btn btn-sm btn-outline-success fw-bold ms-2"
  *ngIf="isResponsableSAV() && rec.status === 'EnAttente'"
  (click)="planifier(rec)">
  ğŸ› ï¸ Planifier
</button>

            </td>
          </tr>

          <tr *ngIf="reclamations.length === 0">
            <td colspan="7" class="text-center text-muted fst-italic">
              ğŸ˜” Aucune rÃ©clamation trouvÃ©e
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
